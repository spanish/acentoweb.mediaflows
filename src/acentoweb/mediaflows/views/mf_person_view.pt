<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      i18n:domain="acentoweb.mediaflows"
      metal:use-macro="context/main_template/macros/master">
<body>
  <metal:block fill-slot="content-core">
<!--
      <figure tal:define="scale_func context/@@images;
                  scale context/@@images;
                  scaled_image python:scale_func.scale('image', scale='preview')"
                  tal:on-error=""
                  class="mf_person_image">
              <img tal:replace="structure python:scaled_image.tag()"
                   tal:condition="scaled_image" />
               <figcaption class="padding-10-0" tal:condition="context/image_caption|nothing"
                   tal:content="context/image_caption">
               </figcaption>
      </figure>
-->

      <div tal:condition="context/orcid|None">
        <span i18n:translate="">ORCID</span>: <a href="${context/orcid}">${context/orcid}</a>
      </div>

      <div tal:condition="context/mail">
        <span i18n:translate="">Mail</span>: <a href="mailto:${context/mail}">${context/mail}</a>
      </div>
      <div tal:condition="context/web|None">
        <span i18n:translate="">Web</span>: <a href="${context/web}">${context/web}</a>
      </div>

      <div tal:condition="context/institution|None">
        <span i18n:translate="">Institution</span>: ${context/institution}
      </div>

      <div tal:condition="context/specialties|None">
        <span i18n:translate="">Specialties</span>: ${context/specialties}
      </div>

      <div tal:condition="context/work|None">
        <span i18n:translate="">Work</span>: ${context/work}
      </div>

      <div tal:condition="context/person_research_role">
        <span i18n:translate="">Research role</span>: <span tal:replace="structure view/widgets/person_research_role/render" />
      </div>

      <div tal:condition="context/person_research_sc">
        <span i18n:translate="">Research Subgroup Coordinator</span>: <span tal:replace="structure view/widgets/person_research_sc/render" />
      </div>

      <div tal:condition="context/text">
        <h2 i18n:translate="">Text</h2>
        <div tal:replace="structure context/text/output|None" />
      </div>

      <tal:check tal:condition="view/back_publications|None">
         <h2 i18n:translate="">Publications</h2>
         <tal:repeat tal:repeat="ref view/back_publications">
          <tal:define tal:define="ref_obj nocall:ref">
            <h3>
              <a href="${ref_obj/getURL|ref_obj/absolute_url}" class="margin-0 padding-0">
                ${ref_obj/Title|None}
              </a>
            </h3>
          </tal:define>
         </tal:repeat>
      </tal:check>

      <tal:check tal:condition="view/back_activities|None">
         <h2 i18n:translate="">Activities</h2>
         <tal:repeat tal:repeat="ref view/back_activities">
           <tal:define tal:define="scale_func ref/@@images|None;item nocall:ref;portal_type item/portal_type">
               <tal:define tal:define="scaled_image python:scale_func.scale('image', width=150, height=150, direction='down') or None"
                           tal:on-error="">
                 <a href="${ref/getURL|ref/absolute_url}" class="margin-0 padding-0">
                   <img  class="image-popup"
                         tal:replace="structure python:scaled_image.tag()"
                         tal:on-error=""
                         tal:condition="scaled_image"/>
                   <div>
                     <h3>${ref/Title|None}</h3>
                   </div>
                 </a>
               </tal:define>
             </tal:define>
         </tal:repeat>
      </tal:check>

      <tal:check tal:condition="view/back_news|None">
         <h2 i18n:translate="">News</h2>
         <tal:repeat tal:repeat="ref view/back_news">
           <tal:define tal:define="scale_func ref/@@images|None;item nocall:ref;portal_type item/portal_type">
               <tal:define tal:define="scaled_image python:scale_func.scale('image', width=150, height=150, direction='down') or None"
                           tal:on-error="">
                 <a href="${ref/getURL|ref/absolute_url}" class="margin-0 padding-0">
                   <img  class="image-popup"
                         tal:replace="structure python:scaled_image.tag()"
                         tal:on-error=""
                         tal:condition="scaled_image"/>
                   <div>
                     <h3>${ref/Title|None}</h3>
                   </div>
                 </a>
               </tal:define>
             </tal:define>
         </tal:repeat>
      </tal:check>

  </metal:block>
</body>
</html>
